{% extends "../base.html" %}
{% load static %}
{% block title %}{{show.title}}{% endblock %}
{% block content %}
<div class='container-fluid'>
	<div id="actor-image" style="background-image:url({{show.image_preview}})">
		<div class='d-flex float-right flex-column'>
			<button class="rounded-btn mt-3 mr-3 pl-2 pr-3 content-stats"><i class='fa fa-check-circle pr-3 primary-blue f-16'></i>{{show.follower_count}} followers</button>
			<button class="rounded-btn mt-2 mr-3 pl-2 pr-3 content-stats"><i class='fa fa-heart pr-3 pale-red f-16'></i>{{show.favorited_count}} favorited</button>
		</div>
	</div>

	<div id='actor-content'>
		<div class="row">
			<!-- scrollbar --> 
			<div class='col-2 content-scrollbar mt-4 mb-4 pr-1'>

				<!--scrollbar dot --> 
				<div class='sticky-top'>
					<div id='scrollbar-dot' class='circular'></div>
					<ul class='list-group'>
						<li class="list-group-item content-nav ml-2 mt-2"><a href="#show-about">About</a></li>
						<li class="list-group-item content-nav ml-2"><a href="#show-about">Cast</a></li>
						<li class="list-group-item content-nav ml-2 pr-0"><a href="#show-episode-highlights">Episode Highlights</a></li>
						<li class="list-group-item content-nav ml-2"><a href="#show-similar-shows">Similar Shows</a></li>
						<li class="list-group-item content-nav ml-2"><a href="#show-reviews">Reviews</a></li>
						<li class="list-group-item content-nav ml-2"><a href="#show-contribute">Contribute</a></li>
					</ul>
				</div>
			</div>

			<!-- actual content --> 
			<div class='col-10 content-main'>
				<!-- overview -->
				<div class='row scrollable-point' id='actor-overview'>
					<div class='col-9 popular-shows'>
						<h1 class='mt-5 ml-3 f-36'>{{show.title}}</h1>
					</div>
					<div class='col-3 related-celebs'>
					</div>
				</div>
				<!-- about section -->
				<h5 class='mt-5 ml-3 pt-5 scrollable-point' id='actor-about'>About</h5>
				<div class="row mt-3 ml-1">
					<div class='col-2'>
						<div class='picture-preview'></div>
					</div>
					<div class='col-6'>
						<p class='font-open-sans'>This is a short summary of the actor. YESSSSS</p>
					</div>
					<div class='col-4'>
						<div class='actor-stats'></div>
					</div>
				</div>

				<!-- shows --> 
				<h5 class='mt-1 ml-3 pt-5 scrollable-point' id='actor-shows'>Shows</h5>
				<div class='row ml-1'>
					{% for show in info %}
					<div class='col-6'>
						<div class='row'>
							<div class='col-2'>
								<div class='show-list-preview mt-2'></div>
							</div>
							<div class='col-10 mt-1'>
								<ul class='list'>
									<li><a href="#" class='actor-show-title'>{{show.show.title}}</a></li>
									<li><p class='mt-3'><span class='semi-bold'>Aired</span>: {{show.show.year}}</p></li>
									<li><p class=''><span class='semi-bold'>Portrayed</span>: {{show.role_name}}</p></li>
								</ul>
							</div>
						</div>
					</div>

					{% if forloop.counter|divisibleby:2 and forloop.counter != 0 %}
						<div class='row show-divider ml-3 mt-4 mb-4'></div>
					{% endif %}
					{% endfor %}
				</div>

				<!-- resources --> 
				<h5 class='ml-3 mt-3 scrollable-point' id='actor-resources'>Resources</h5>
			</div>
		</div>
	</div>

	{% endblock %}
	{% block scripts %}
	<script type='text/javascript' src="{% static 'js/content.min.js' %}"></script>
	<script>
		$(document).ready(function() {
			// follow actor functionality
			$("#follow-actor").on("click", function() {
				
				var following = true;
				// this means that theyr'e not followed yet
				if ($(this).hasClass("blue-btn")) {
					following = false;
				}

				$.ajax({
					type: "POST",
					data: {
						actor: $("#data-actor").data("actor"),
						csrfmiddlewaretoken: '{{csrf_token}}',
						follow: !following
					},
					url: "/actors/follow_actor/",
					success: function(result){
						console.log(result);
					},
					error: function(result) {
						console.log(result);
					}
				});

				//change button appearance
				if (!following) {
					$(this).removeClass("background-light-blue");
					$(this).removeClass("blue-btn");
					$("#follow-actor-text").text("Followed");
				} else {
					$(this).addClass("background-light-blue");
					$(this).addClass("blue-btn");
					$("#follow-actor-text").text("Follow");
				}
			});

			//favorite user functionality
			$("#favorite-actor").on("click", function() {
				
				var favorited = true;
				// this means that theyr'e not followed yet
				if ($(this).hasClass("blue-btn")) {
					favorited = false;
				}

				$.ajax({
					type: "POST",
					data: {
						actor: $("#data-actor").data("actor"),
						csrfmiddlewaretoken: '{{csrf_token}}',
						favorite: !favorited
					},
					url: "/actors/favorite_actor/",
					success: function(result){
						console.log(result);
					},
					error: function(result) {
						console.log(result);
					}
				});

				//change button appearance
				if (!favorited) {
					$(this).removeClass("background-light-blue");
					$(this).removeClass("blue-btn");
					$("#favorite-actor-text").text("Favorited");
				} else {
					$(this).addClass("background-light-blue");
					$(this).addClass("blue-btn");
					$("#favorite-actor-text").text("Favorite");
				}
			});
		});
	</script>
	{% endblock %}